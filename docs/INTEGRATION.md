# Wortschatzspiel ↔ PedagoReLearn Integration Contract (Pilot 2026)

## Purpose
Wortschatzspiel is the **dependent tutoring subsystem** that generates structured learning content and learner interaction traces for the **parent agent environment** (PedagoReLearn). This document defines the minimum file-based interface (“repo contract”) for the Pilot 2026 workflow.

---

```text
PedagoReLearn (RL agent, policy learning)
        ↑ consumes
Wortschatzspiel (content + logs + learner state)
```

## Inputs to Wortschatzspiel (What Wortschatzspiel takes)

### 1) Content + Rule Inputs (YAML)
- **Location:** `linguistic_rules/`
- **Format:** YAML (`.yaml`)
- **Purpose:** Defines vocabulary items, grammar constraints, and feedback scaffolds used by the tutoring UI and sequencing logic.

### 2) Session Configuration (JSON or YAML)
- **Location:** `config/` (or `configs/`)
- **Example file:** `config/pilot_session_config.json`
- **Purpose:** Defines pilot settings (condition, session length, target clusters, etc.).

### 3) Optional: Starting Learner State (JSON)
- **Location:** `learner_state/`
- **Example file:** `learner_state/<participant_id>_state.json`
- **Purpose:** Allows session continuation or rehydration after a pause.

---

## Outputs from Wortschatzspiel (What Wortschatzspiel produces)

### A) rules/ (YAML) — “What the tutor knows”
- **Location:** `linguistic_rules/`
- **Format:** YAML (`.yaml`)
- **Generated by:** Content authoring + rule updates
- **Consumed by:** Wortschatzspiel tutor logic; PedagoReLearn uses this as the content/rule source-of-truth (pilot dependent)

Minimum expected files (pilot):
- `linguistic_rules/vocab/cefr_a1_core.yaml`
- `linguistic_rules/grammar/negation.yaml`
- `linguistic_rules/feedback/templates.yaml`

---

### B) session_logs/ (CSV or JSONL) — “What the learner did”
- **Location:** `data_collection/raw/session_logs/`
- **Format options:** 
  - CSV (`.csv`) for easy stats
  - JSONL (`.jsonl`) for rich event traces
- **Naming convention:** 
  - `session_<participant_id>_<YYYYMMDD-HHMM>.csv` (or `.jsonl`)

Minimum required columns/fields (pilot):
- `timestamp_utc`
- `participant_id` (pseudonymized)
- `session_id`
- `condition` (control|treatment)
- `item_id` (vocab/grammar item)
- `prompt`
- `response`
- `is_correct`
- `error_type` (if incorrect)
- `hint_level_shown`
- `latency_ms`
- `next_action` (what the tutor/agent did next)

Consumed by: PedagoReLearn training/evaluation scripts.

---

### C) learner_state/ (JSON) — “What the agent thinks the learner knows”
- **Location:** `data_collection/processed/learner_state/`
- **Format:** JSON (`.json`)
- **Naming convention:** `learner_<participant_id>_state.json`

Minimum required fields (pilot):
- `participant_id` (pseudonymized)
- `last_updated_utc`
- `mastery` (dictionary of item_id → mastery score 0–1)
- `exposures` (dictionary of item_id → count)
- `recent_errors` (dictionary or list)
- `recommended_next_items` (list of item_ids)

Consumed by: PedagoReLearn state representation and reward computation.

---

## Privacy / Anonymity Requirements
- No real names, emails, UINs, or student IDs in any logs.
- Participant identifiers must be pseudonyms (e.g., `P001`, `P002`) generated separately from consent records.
- Consent records must remain local (not pushed to GitHub).

---

## Status
- Pilot contract version: v0.1 (file-based interface; schema may evolve)
- Last updated: 2026-01-01